{{ define "index.html" }}
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Portals</title>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <script defer src="https://unpkg.com/htmx.org@1.9.12/dist/ext/sse.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 20px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(5, 48px);
      gap: 8px;
      text-align: center;
    }

    .cell {
      width: 48px;
      height: 48px;
      border: 1px solid #ccc;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .bubble {
      position: absolute;
      bottom: -8px;
      right: -8px;
      padding: 2px 6px;
      border-radius: 12px;
      background: #222;
      color: #fff;
      font-size: 12px;
    }

    .portal {
      background: #eef;
    }

    .wrap {
      display: grid;
      grid-template-columns: 1fr 220px;
      gap: 24px;
    }


    .cell {
      border: 1px solid black;
      /* width: 100px;
      height: 100px; */
      display: flex;
      align-items: center;
      justify-content: center;
      /* font-size: 20px; */
      font-style: black;
      transition: transform 0.1s ease-in-out;
    }

    .cell:hover {
      transform: scale(1.2);
      z-index: 10;
      transform-origin: center;
      position: relative;
    }


    .board-wrap {
      position: relative;
      display: inline-block;
    }

    .tokens {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
  </style>
</head>

<body hx-ext="sse" sse-connect="/events">
  <div class="container d-flex flex-column justify-content-center align-items-center gap-2" style="width: 50vw;">
    <!-- Join -->
    <div class="container" id="join-area">
      {{ template "_join_form.html" . }}
    </div>

    <!-- Board -->
    <div class="container">
      <div class="row">
        <div class="col">
          <div class="panel">
            <h3>Board</h3>
            {{ template "_board.html" . }}
          </div>
        </div>
        <div class="col">
          <div class="panel text-center">
            <h3>Stream</h3>
            {{ template "_stream_chats.html" .}}
          </div>
        </div>
      </div>
      <hr />
      <div class="row">
        <div class="col">
          <div class="panel text-start">
            <h3>Players</h3>
            <div id="players" sse-swap="players" hx-swap="innerHTML"></div>
          </div>
        </div>
        <div class="col">
          <div class="panel text-start">
            <h3>Dice</h3>
            <div id="dice" sse-swap="dice" hx-swap="outerHTML">
              {{ template "_dice.html" . }}
            </div>
          </div>
        </div>
      </div>

      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
      </script>
</body>

</html>
{{ end }}